import{p as t}from"./phaser-CrGWs1g-.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class e extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("main-background","assets/game-images/EcoQuest.png"),this.load.image("bg-color","assets/game-images/bg-color.png"),this.load.image("congratulations","assets/game-images/congratulation.png"),this.load.image("game_over","assets/game-images/game_over.png"),this.load.image("main-board","assets/game-images/main-board.png"),this.load.image("popup-action","assets/game-images/action-popup.png"),this.load.image("popup-white","assets/game-images/white_popup.png"),this.load.image("btn_start","assets/game-images/buttons/btn_start.png"),this.load.image("btn_ok","assets/game-images/buttons/btn_ok.png"),this.load.image("btn_backtomain","assets/game-images/buttons/btn_backtomain.png"),this.load.image("btn_play","assets/game-images/buttons/btn_play.png"),this.load.image("btn_1","assets/game-images/buttons/btn_1.png"),this.load.image("btn_2","assets/game-images/buttons/btn_2.png"),this.load.image("btn_3","assets/game-images/buttons/btn_3.png"),this.load.image("btn_4","assets/game-images/buttons/btn_4.png")}create(){this.scene.start("Preloader")}}class i{constructor(t,e,i){this.scene=t,this.addPopup(e,i)}addPopup(t,e){let i=this.scene.add.image(960,540,"popup-white"),s=this.scene.add.text(960,250,t,{fontFamily:"Arial Black",fontSize:50,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),a=this.scene.add.text(950,500,e,{fontFamily:"Arial",fontSize:35,color:"black",align:"left"}).setOrigin(.5),r=this.scene.add.image(960,800,"btn_ok");this.popup1Container=this.scene.add.container(0,0,[i,s,a,r]),this.popup1Container.setInteractive(new Phaser.Geom.Rectangle(0,0,2*i.displayWidth,2*i.displayHeight),Phaser.Geom.Rectangle.Contains),this.popup1Container.on("pointerdown",(()=>{this.popup1Container.visible=!this.popup1Container.visible})),this.popup1Container.visible=!0}showHidePopup(){this.popup1Container.visible=!this.popup.visible}}let s={fontFamily:"Arial Black",fontSize:40,color:"#ffffff",stroke:"#000000",strokeThickness:4,align:"center"},a={fontFamily:"Arial Black",fontSize:80,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"};class r extends t.Scene{resetScoreTurns(){this.environment_health=100,this.economic_stability=100,this.public_satisfaction=100,this.currTurns=1,this.maxTurns=10,this.currAction=0}constructor(){super("Game")}create(){this.resetScoreTurns(),this.add.image(960,540,"main-board"),this.gameSetup()}gameSetup(){this.popup=new i(this,"Game Objective","Achieve a balance of the three core metrics—environmental health, \neconomic growth, and public satisfaction—by the end of the game. \n\nThe game lasts for 10 rounds. In each round, you are to make \na decision that will impact the world. \n\nIf any metric drops too low (e.g., catastrophic pollution \nor complete economic collapse), you will lose the game."),this.envi_score_label=this.add.text(430,65,this.environment_health,s).setOrigin(.5),this.econ_score_label=this.add.text(950,65,this.economic_stability,s).setOrigin(.5),this.public_score_label=this.add.text(1450,65,this.public_satisfaction,s).setOrigin(.5),this.round_score_label=this.add.text(1760,150,this.currTurns,a).setOrigin(.5);let t=this.add.image(1780,260,"btn_play");t.setInteractive(),t.scale=.45,t.on("pointerover",(()=>{t.scale=.5})),t.on("pointerout",(()=>{t.scale=.45})),t.on("pointerdown",(()=>{this.createActionPopup()}))}createActionPopup(){this.add.image(960,540,"popup-action"),this.inActionRound_label=this.add.text(560,840,this.currTurns,{fontFamily:"Arial Bold",fontSize:35,color:"black",align:"left"}).setOrigin(.5);let t=this.add.line(470,640,0,0,100,0,16711680).setLineWidth(10),e=this.add.line(780,640,0,0,100,0,16711680).setLineWidth(10),i=this.add.line(1100,640,0,0,100,0,16711680).setLineWidth(10),s=this.add.line(1450,640,0,0,100,0,16711680).setLineWidth(10);t.visible=!1,e.visible=!1,i.visible=!1,s.visible=!1;let a=this.add.image(470,710,"btn_1");a.setInteractive(),a.on("pointerover",(()=>{a.scale=1.1})),a.on("pointerout",(()=>{a.scale=1})),a.on("pointerdown",(()=>{t.visible=!0,e.visible=!1,i.visible=!1,s.visible=!1,this.currAction=1}));let r=this.add.image(780,710,"btn_2");r.setInteractive(),r.on("pointerover",(()=>{r.scale=1.1})),r.on("pointerout",(()=>{r.scale=1})),r.on("pointerdown",(()=>{t.visible=!1,e.visible=!0,i.visible=!1,s.visible=!1,this.currAction=2}));let n=this.add.image(1100,710,"btn_3");n.setInteractive(),n.on("pointerover",(()=>{n.scale=1.1})),n.on("pointerout",(()=>{n.scale=1})),n.on("pointerdown",(()=>{t.visible=!1,e.visible=!1,i.visible=!0,s.visible=!1,this.currAction=3}));let o=this.add.image(1450,710,"btn_4");o.setInteractive(),o.on("pointerover",(()=>{o.scale=1.1})),o.on("pointerout",(()=>{o.scale=1})),o.on("pointerdown",(()=>{t.visible=!1,e.visible=!1,i.visible=!1,s.visible=!0,this.currAction=4}));let h=this.add.image(1450,830,"btn_ok");h.setInteractive(),h.on("pointerover",(()=>{h.scale=1.1})),h.on("pointerout",(()=>{h.scale=1})),h.on("pointerdown",(()=>{this.updateGame()}))}updateGame(){this.runCalculation(this.currAction),this.envi_score_label.setText(this.environment_health),this.econ_score_label.setText(this.economic_stability),this.public_score_label.setText(this.public_satisfaction),this.checkGameOver(),this.currTurns+=1,this.round_score_label.setText(this.currTurns),this.inActionRound_label.setText(this.currTurns)}runCalculation(t){switch(t){case 1:this.environment_health+=10,this.economic_stability-=5,this.public_satisfaction+=5;break;case 2:this.environment_health-=20,this.economic_stability+=10,this.public_satisfaction+=-5;break;case 3:this.environment_health+=5,this.economic_stability-=10,this.public_satisfaction-=5;break;case 4:this.environment_health+=5,this.economic_stability-=5,this.public_satisfaction+=10}}checkGameOver(){let t,e,i="WIN";this.environment_health<=0?(i="LOSE",e="The environment has collapsed."):this.economic_stability<=0?(i="LOSE",e="The economy has collapsed."):this.public_satisfaction<=0&&(i="LOSE",e="The public has revolted."),10!=this.currTurns&&"LOSE"!=i||(t="LOSE"==i?{state:i,failParameter:e}:{state:"WIN",failParameter:""},this.scene.start("GameOver",t))}}class n extends t.Scene{constructor(){super("GameOver")}init(t){this.data=t}create(){var t;this.add.image(960,540,"bg-color"),this.add.image(960,540,"popup-white"),"WIN"==this.data.state?(t="Congratulations, you survived Ecoquest!",this.add.image(950,410,"congratulations").scale=1.3):(t=this.data.failParameter+"\nYou are not successful in winning Ecoquest this time.\nMaybe next time.",this.add.image(960,410,"game_over")),this.add.text(950,650,t,{fontFamily:"Arial",fontSize:40,color:"black",stroke:"#000000",strokeThickness:0,align:"center"}).setOrigin(.5);const e=this.add.image(950,820,"btn_backtomain");e.setInteractive(),e.scale=.8,e.on("pointerover",(()=>{e.scale=.85})),e.on("pointerout",(()=>{e.scale=.8})),e.on("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class o extends t.Scene{constructor(){super("MainMenu")}create(){this.add.image(960,540,"main-background");const t=this.add.image(960,620,"btn_start");t.setInteractive(),t.scale=.8,t.on("pointerover",(()=>{t.scale=.85})),t.on("pointerout",(()=>{t.scale=.8})),t.on("pointerdown",(()=>{this.scene.start("Game")}))}}class h extends t.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"main-background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(e=>{t.width=4+460*e}))}preload(){this.load.setPath("assets")}create(){this.scene.start("MainMenu")}}var l=Phaser.Renderer.WebGL.Utils,d=Phaser.Renderer.WebGL.Utils;const c=Phaser.GameObjects.GetCalcMatrix,u=Phaser.Renderer.Canvas.SetTransform,p={renderWebGL:function(t,e,i,s){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),r=c(e,i,s),n=a.calcMatrix.copyFrom(r.calc),o=e._displayOriginX,h=e._displayOriginY,u=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&function(t,e,i,s,a,r){for(var n=l.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*s),o=i.pathData,h=i.pathIndexes,d=0;d<h.length;d+=3){var c=2*h[d],u=2*h[d+1],p=2*h[d+2],g=o[c+0]-a,m=o[c+1]-r,b=o[u+0]-a,v=o[u+1]-r,f=o[p+0]-a,y=o[p+1]-r,_=e.getX(g,m),x=e.getY(g,m),k=e.getX(b,v),R=e.getY(b,v),T=e.getX(f,y),S=e.getY(f,y);t.batchTri(i,_,x,k,R,T,S,0,0,1,1,n,n,n,2)}}(a,n,e,u,o,h),e.isStroked&&function(t,e,i,s,a){var r=t.strokeTint,n=d.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);r.TL=n,r.TR=n,r.BL=n,r.BR=n;var o=e.pathData,h=o.length-1,l=e.lineWidth,c=l/2,u=o[0]-s,p=o[1]-a;e.closePath||(h-=2);for(var g=2;g<h;g+=2){var m=o[g]-s,b=o[g+1]-a;t.batchLine(u,p,m,b,c,c,l,g-2,!!e.closePath&&g===h-1),u=m,p=b}}(a,e,u,o,h),t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,s){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var a=t.currentContext;if(u(t,a,e,i,s)){var r=e._displayOriginX,n=e._displayOriginY,o=e.pathData,h=o.length-1,l=o[0]-r,d=o[1]-n;a.beginPath(),a.moveTo(l,d),e.closePath||(h-=2);for(var c=2;c<h;c+=2){var p=o[c]-r,g=o[c+1]-n;a.lineTo(p,g)}a.closePath(),e.isFilled&&(function(t,e,i,s){var a=e.fillColor,r=e.fillAlpha,n=(16711680&a)>>>16,o=(65280&a)>>>8,h=255&a;t.fillStyle="rgba("+n+","+o+","+h+","+r+")"}(a,e),a.fill()),e.isStroked&&(function(t,e,i,s){var a=e.strokeColor,r=e.strokeAlpha,n=(16711680&a)>>>16,o=(65280&a)>>>8,h=255&a;t.strokeStyle="rgba("+n+","+o+","+h+","+r+")",t.lineWidth=e.lineWidth}(a,e),a.stroke()),a.restore()}}},g=Phaser.GameObjects.Shape;class m extends g{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=null!=t&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&null!=this._fillColor}setFillStyle(t,e){return void 0===e&&(e=1),this.fillColor=t,this.fillAlpha=e,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=null!=t&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&null!=this._strokeColor&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&null!=this._strokeColor}setStrokeStyle(t,e,i){return void 0===i&&(i=1),this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}}Object.assign(m.prototype,p);const b=Phaser.Utils.Objects.GetValue;let v=class{constructor(t,e,i,s,a){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,s,a)}setTo(t,e,i,s,a){return this.setPosition(t,e),this.setRadius(a),this.setSize(i,s),this}setPosition(t,e){return this.x=t,this.y=e,this}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,i;"number"==typeof t?(e=t,i=t):(e=b(t,"x",0),i=b(t,"y",0));var s=this.cornerRadius;s.tl=f(b(t,"tl",void 0),e,i),s.tr=f(b(t,"tr",void 0),e,i),s.bl=f(b(t,"bl",void 0),e,i),s.br=f(b(t,"br",void 0),e,i)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){y(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){y(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){y(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){y(this.cornerRadius.br,t)}};var f=function(t,e,i){return void 0===t?t={x:e,y:i}:"number"==typeof t&&(t={x:t,y:t}),_(t),t},y=function(t,e){"number"==typeof e?(t.x=e,t.y=e):(t.x=b(e,"x",0),t.y=b(e,"y",0)),_(t)},_=function(t){t.convex=t.x>=0||t.y>=0,t.x=Math.abs(t.x),t.y=Math.abs(t.y)},x=function(t){return t.x>0&&t.y>0},k=function(t,e,i){var s=i.length;if(s>=2){var a=i[s-2],r=i[s-1];if(t===a&&e===r)return i}return i.push(t,e),i};const R=Phaser.Math.DegToRad;var T=function(t,e,i,s,a,r,n,o,h){n&&r>a?r-=360:!n&&r<a&&(r+=360);var l=R(r-a)/o;a=R(a);for(var d=0;d<=o;d++){var c=a+l*d,u=t+i*Math.cos(c),p=e+s*Math.sin(c);k(u,p,h)}return h};const S=Phaser.Utils.Objects.IsPlainObject,P=Phaser.Utils.Objects.GetValue,w=Phaser.Geom.Polygon.Earcut;class A extends m{constructor(t,e,i,s,a,r,n,o){var h,l,d,c;if(S(e)){var u=e;e=u.x,i=u.y,s=u.width,a=u.height,r=u.radius,n=u.color,o=u.alpha,h=u.strokeColor,l=u.strokeAlpha,d=u.strokeWidth,c=u.shape}void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===a&&(a=s),void 0===r&&(r=0),void 0===c&&(c=0);var p=new v;if(super(t,"rexRoundRectangleShape",p),this.setShapeType(c),0===this.shapeType){var g=P(r,"radius",r);p.setTo(0,0,s,a,g)}else g={x:s/2,y:a/2},p.setTo(0,0,s,a,g);this.setIteration(P(r,"iteration",void 0)),this.setPosition(e,i),this.setFillStyle(n,o),void 0===d&&(d=2),this.setStrokeStyle(d,h,l),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var i,s=t.width,a=t.height,r=t.cornerRadius,n=this.iteration+1;if(i=r.tl,x(i))if(i.convex){var o=i.x,h=i.y;T(o,h,i.x,i.y,180,270,!1,n,e)}else T(o=0,h=0,i.x,i.y,90,0,!0,n,e);else k(0,0,e);return i=r.tr,x(i)?i.convex?(o=s-i.x,h=i.y,T(o,h,i.x,i.y,270,360,!1,n,e)):T(o=s,h=0,i.x,i.y,180,90,!0,n,e):k(s,0,e),i=r.br,x(i)?i.convex?(o=s-i.x,h=a-i.y,T(o,h,i.x,i.y,0,90,!1,n,e)):T(o=s,h=a,i.x,i.y,270,180,!0,n,e):k(s,a,e),i=r.bl,x(i)?i.convex?(o=i.x,h=a-i.y,T(o,h,i.x,i.y,90,180,!1,n,e)):T(o=0,h=a,i.x,i.y,360,270,!0,n,e):k(0,a,e),e.push(e[0],e[1]),this.pathIndexes=w(e),this}setShapeType(t){return"string"==typeof t&&(t=O[t]),this.shapeType=t,this}setSize(t,e){return void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e||(this.geom.setSize(t,e),1===this.shapeType&&this.setRadius({x:t/2,y:e/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,e)),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}setRadiusTL(t){return void 0===t&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return void 0===t&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return void 0===t&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return void 0===t&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}}const O={rectangle:0,circle:1};function C(t,e,i,s,a,r,n){var o=new A(this.scene,t,e,i,s,a,r,n);return this.scene.add.existing(o),o}const L=Phaser.Utils.Objects.GetAdvancedValue,B=Phaser.Utils.Objects.GetValue,G=Phaser.GameObjects.BuildGameObject;function M(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=L(t,"width",void 0),s=L(t,"height",i),a=B(t,"radius",void 0),r=L(t,"fillColor",void 0),n=L(t,"fillAlpha",void 0),o=new A(this.scene,0,0,i,s,a,r,n);return G(this.scene,o,t),o}var W=function(t){return null==t||""===t||0===t.length};class I extends Phaser.Plugins.BasePlugin{constructor(t){super(t),t.registerGameObject("rexRoundRectangle",C,M)}start(){this.game.events.on("destroy",this.destroy,this)}}!function(t,e,i,s){if(void 0===s&&(s="."),"object"==typeof t)if(W(e)){if(null==i)return;"object"==typeof i&&(t=i)}else{"string"==typeof e&&(e=e.split(s));var a=e.pop(),r=function(t,e,i){var s=t;if(W(e));else{var a;"string"==typeof e&&(e=e.split("."));for(var r=0,n=e.length;r<n;r++){var o;null!=s[a=e[r]]&&"object"==typeof s[a]||(o={},s[a]=o),s=s[a]}}return s}(t,e);r[a]=i}}(window,"RexPlugins.GameObjects.RoundRectangle",A);const j={type:Phaser.AUTO,width:1920,height:1080,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},plugins:{global:[{key:"rexRoundRectanglePlugin",plugin:I,start:!0}]},scene:[e,h,o,r,n]};new Phaser.Game(j);
